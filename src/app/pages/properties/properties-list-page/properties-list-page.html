<div class="main-container modern-layout">

<!-- Modern Header Section -->
<div class="page-header">
    <div class="search-filters">
        <div class="search-box">
            <i class="fa fa-search search-icon"></i>
            <input type="text" id="i_search" name="i_search" (keyup)="onKeyup($event)" placeholder="Buscar propiedades..." class="modern-search-input" autocomplete="off">
        </div>
        
        <div class="filter-box">
            <i class="fa fa-filter filter-icon"></i>
            <select id="s_status" name="s_status" class="modern-select" (change)="onChangeStatus($event)">
                <option value="All">Todas las propiedades</option>
                <option value="Libre">Libre</option>
                <option value="Separado">Separado</option>
                <option value="Bloqueado">Bloqueado</option>
            </select>
        </div>
    </div>
    
    <div class="action-buttons">
        <button class="btn-refresh" (click)="checkFilter()" title="Actualizar">
            <i class="fa fa-sync-alt"></i>
        </button>
        <button class="btn-secondary" (click)="goMap()">
            <i class="fa fa-map"></i>
            <span>Ver Mapa</span>
        </button>
        <button class="btn-primary" (click)="goCreate()">
            <i class="fa fa-plus"></i>
            <span>Nueva Propiedad</span>
        </button>
    </div>
</div>

<!-- Modern Properties List -->
<div class="properties-container">
    <div class="properties-list">
        <div class="list-header">
            <div class="header-col code-col">#</div>
            <div class="header-col area-col">Área</div>
            <div class="header-col dimensions-col">Dimensiones</div>
            <div class="header-col updated-col">Actualización</div>
            <div class="header-col phase-col">Fase</div>
            <div class="header-col status-col">Estado</div>
            <div class="header-col actions-col">Acciones</div>
        </div>
        
        <div class="list-content">
            @for(item of this.propertyService.propertiesFiltered; track $index)
            {
                <div class="property-row">
                    <div class="row-col code-col">
                        <span class="property-code">{{item.code}}</span>
                    </div>
                    
                    <div class="row-col area-col">
                        <div class="area-info">
                            <i class="fa fa-expand-arrows-alt"></i>
                            <span>{{item.area}} m²</span>
                        </div>
                    </div>
                    
                    <div class="row-col dimensions-col">
                        <div class="dimensions-info">
                            <div class="dimension-item">
                                <i class="fa fa-arrows-alt-h"></i>
                                <span>{{item.width}}m</span>
                            </div>
                            <div class="dimension-item">
                                <i class="fa fa-arrows-alt-v"></i>
                                <span>{{item.depth}}m</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row-col updated-col">
                        <span class="updated-date">{{convertTimeToLocal(item.updatedAt)}}</span>
                    </div>
                    
                    <div class="row-col phase-col">
                        <span class="phase-info">-</span>
                    </div>
                    
                    <div class="row-col status-col">
                        <span class="status-badge" 
                              [class.libre]="item.status === 'Libre'"
                              [class.separado]="item.status === 'Separado'"
                              [class.bloqueado]="item.status === 'Bloqueado'">{{item.status}}</span>
                    </div>
                    
                    <div class="row-col actions-col">
                        <div class="property-actions">
                            <button class="action-btn view" title="Ver detalles">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn edit" title="Editar">
                                <i class="fas fa-pen"></i>
                            </button>
                            <button class="action-btn map" title="Ver en mapa">
                                <i class="fas fa-map-marker-alt"></i>
                            </button>
                            <button class="action-btn delete" title="Eliminar" (click)="confirmDeleteProperty(item)">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>
        
        @if (this.propertyService.propertiesFiltered.length === 0) {
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fa fa-home"></i>
                </div>
                <h3>No hay propiedades registradas</h3>
                <p>Comienza agregando tu primera propiedad</p>
                <button class="btn-primary" (click)="goCreate()">
                    <i class="fa fa-plus"></i>
                    Agregar Propiedad
                </button>
            </div>
        }
    </div>
</div>

</div>

<!--<app-user-profile-component></app-user-profile-component>-->
<app-menu-component></app-menu-component>
<app-project-selector-component></app-project-selector-component>
<app-loader-component></app-loader-component>
<app-property-create-component (propertyCreatedAction)="propertyCreated($event)"></app-property-create-component>