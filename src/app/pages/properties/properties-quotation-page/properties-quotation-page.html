<div class="main-container">

    <div id="panel-side" style="max-width: 300px; padding: 20px;">
        <div id="panel-client-name" style="background-color: #fbfbfb; min-width: 280px; box-shadow: 0 0 4px #bbbbbb; border-radius: 10px; padding: 15px;  color: #444444; display:block;" >
            <div align="left">
                <div style="display: flex; align-items: center;  padding-right: 20px; " class="project-card">
                    <i class="fa-regular fa-user-viewfinder" style="font-size: 36px; margin-right: 15px; color: var(--color-b);"></i>
                    <div>
                        <div style="font-size: 14px;"><b>{{ this.propertiesQuotationService.client.name.toUpperCase() }}&nbsp;{{ this.propertiesQuotationService.client.lastName1.toUpperCase() }}</b></div>
                        <div style="font-size: 14px; margin-top: 4px; color: var(--gray);">CC. {{ this.propertiesQuotationService.client.pmsId }}</div>
                        <div style="font-size: 14px; margin-top: 4px; color: var(--gray);">{{ this.propertiesQuotationService.client.email }}</div>
                    </div>
                </div>
            </div>

            <div class="button-flat" style="margin-top: 10px; text-align: right;">
                <a (click)="showClientSearch()">Cambiar</a>
            </div>
        </div>

        <div id="panel-property-name" style="margin-top: 20px; background-color: #fbfbfb; min-width: 280px; box-shadow: 0 0 4px #bbbbbb; border-radius: 10px; padding: 15px;  color: #444444; display:block;" >
            <div align="left">
                <div style="display: flex; align-items: center;  padding-right: 20px; " class="project-card">
                    <i class="fa-regular fa-house-blank" style="font-size: 36px; margin-right: 15px; color: var(--color-b);"></i>
                    <div>
                        <div style="font-size: 15px;"><b>{{ this.propertiesQuotationService.property.code?.toUpperCase() }}</b></div>
                        <div style="font-size: 14px; margin-top: 4px; color: var(--gray);">Área: {{ this.propertiesQuotationService.property.area }} m2</div>
                        <div style="font-size: 14px; margin-top: 4px; color: var(--gray);">Valor: ${{ this.propertiesQuotationService.property.amount | number: '1.0-0' }}</div>
                    </div>
                </div>
            </div>

            <div class="button-flat" style="margin-top: 10px; text-align: right;">
                <a (click)="showPropertySearch()">Cambiar</a>
            </div>
        </div>

        <div id="panel-separation-name" style="margin-top: 30px; background-color: #fbfbfb; min-width: 310px; box-shadow: 0 0 4px #bbbbbb; border-radius: 10px; padding-top: 10px; padding-bottom: 10px;  color: #444444; display:block;" >
            <app-property-quote-card-component></app-property-quote-card-component>
        </div>
    </div>

    <app-property-quote-form-component></app-property-quote-form-component>

    <div id="property-quotas-box">
        <div class="row-header">
            <div class="col" style="max-width: 30px;" align="right"></div>
            <div class="col" style="max-width: auto;">Concepto</div>
            <div class="col" style="max-width: 80px;">Fecha</div>
            <div class="col" style="max-width: 80px;" align="right">Valor</div>
        </div>

        @for(quota of this.propertiesQuotationService.quotas; track $index)
        {
            <div class="row">
                <div class="col" style="max-width: 30px;" align="center">{{quota.number}}</div>
                <div class="col" style="max-width: auto;">{{quota.type}}</div>
                <div class="col" style="max-width: 80px;">{{ quota.dueDate | date: 'dd/MM/yyyy' }}</div>
                <div class="col" style="max-width: 80px;" align="right">${{quota.amount | number : '1.0-0' : 'en-US'}}</div>
            </div>
        }
    </div>

    @if(this.propertiesQuotationService.quotas.length > 0)
    {
        <div class="button" id='bt_submit' style="position: absolute; margin-bottom: 40px; width: 370px; top: 590px; left: 830px;" align="center">
            <a (click)="onSubmit()" >Registrar Cotización&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-check"></i></a>
        </div> 
    }
    <!--
        <div class="button" id='bt_submit' style="position: absolute; margin-bottom: 40px; width: 370px; top: 650px; left: 830px;" align="center">
            <a (click)="testPDF()" >Generar PDF TEST&nbsp;&nbsp;&nbsp;<i class="fa-solid fa-check"></i></a>
        </div> 
    -->
</div>



<app-menu-component></app-menu-component>
<app-project-selector-component></app-project-selector-component>
<app-loader-component></app-loader-component>
<app-client-search-component (selectAction)="selectClient($event)"></app-client-search-component>
<app-property-search-component (selectAction)="selectProperty($event)" (cancelAction)="cancelSearchProperty()"></app-property-search-component>