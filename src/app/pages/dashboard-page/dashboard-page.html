<div class="main-container modern-layout">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">
        <i class="fas fa-tachometer-alt"></i>
        Dashboard de Gestión
      </h1>
      <p class="dashboard-subtitle">Resumen ejecutivo y métricas clave del negocio</p>
    </div>
    <div class="header-actions">
      <button class="btn-secondary" (click)="onGenerateTable()">
        <i class="fas fa-file-pdf"></i>
        Generar Reporte
      </button>
      <button class="btn-refresh" (click)="refreshData()">
        <i class="fas fa-sync-alt"></i>
      </button>
    </div>
  </div>

  <!-- KPI Cards -->
  <div class="kpi-section">
    <div class="kpi-card sales-kpi">
      <div class="kpi-icon">
        <i class="fas fa-chart-bar"></i>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-value">{{ totalSales | number }}</h3>
        <p class="kpi-label">Cotizaciones</p>
        <span class="kpi-trend positive">
          <i class="fas fa-arrow-up"></i>
          +12%
        </span>
      </div>
    </div>

    <div class="kpi-card revenue-kpi">
      <div class="kpi-icon">
        <i class="fas fa-money-bill-wave"></i>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-value">${{ totalRevenue | number: '1.0-0' }}</h3>
        <p class="kpi-label">Ingresos del Mes</p>
        <span class="kpi-trend positive">
          <i class="fas fa-arrow-up"></i>
          +8%
        </span>
      </div>
    </div>

    <div class="kpi-card properties-kpi">
      <div class="kpi-icon">
        <i class="fas fa-building"></i>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-value">{{ totalProperties | number }}</h3>
        <p class="kpi-label">Propiedades Activas</p>
        <span class="kpi-trend neutral">
          <i class="fas fa-minus"></i>
          0%
        </span>
      </div>
    </div>

    <div class="kpi-card clients-kpi">
      <div class="kpi-icon">
        <i class="fas fa-user-friends"></i>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-value">{{ totalClients | number }}</h3>
        <p class="kpi-label">Clientes Activos</p>
        <span class="kpi-trend positive">
          <i class="fas fa-arrow-up"></i>
          +5%
        </span>
      </div>
    </div>

    <div class="kpi-card payments-kpi">
      <div class="kpi-icon">
        <i class="fas fa-credit-card"></i>
      </div>
      <div class="kpi-content">
        <h3 class="kpi-value">${{ pendingPayments | number: '1.0-0' }}</h3>
        <p class="kpi-label">Saldos por Cobrar</p>
        <span class="kpi-trend warning">
          <i class="fas fa-exclamation-triangle"></i>
          Pendiente
        </span>
      </div>
    </div>
  </div>

  <!-- Dashboard Content Grid -->
  <div class="dashboard-grid">
    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-container">
        <div class="chart-header">
          <h3 class="chart-title">
            <i class="fas fa-chart-area"></i>
            Cotizaciones vs Separaciones
          </h3>
          <span class="chart-period">Últimos 15 días</span>
        </div>
        <div class="chart-content">
          <highcharts-chart
            [constructorType]="chartConstructor"
            [options]="chartOptions"
            [(update)]="updateFlag"
            [oneToOne]="oneToOneFlag"
            class="chart"
          />
        </div>
      </div>

      <div class="chart-container">
        <div class="chart-header">
          <h3 class="chart-title">
            <i class="fas fa-coins"></i>
            Pagos Recibidos
          </h3>
          <span class="chart-period">Últimos 15 días</span>
        </div>
        <div class="chart-content">
          <highcharts-chart
            [constructorType]="chartConstructor"
            [options]="chartOptionsPayments"
            [(update)]="updateFlag"
            [oneToOne]="oneToOneFlag"
            class="chart"
          />
        </div>
      </div>
    </div>

    <!-- Side Information -->
    <div class="info-section">
      <!-- Recent Activity -->
      <div class="info-card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-history"></i>
            Actividad Reciente
          </h3>
        </div>
        <div class="card-content">
          <div class="activity-list">
            <div class="activity-item">
              <div class="activity-icon sale">
                <i class="fas fa-file-contract"></i>
              </div>
              <div class="activity-info">
                <p class="activity-text">Nueva cotización #CT-001245</p>
                <span class="activity-time">Hace 2 horas</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon payment">
                <i class="fas fa-credit-card"></i>
              </div>
              <div class="activity-info">
                <p class="activity-text">Pago recibido $2,500,000</p>
                <span class="activity-time">Hace 4 horas</span>
              </div>
            </div>
            <div class="activity-item">
              <div class="activity-icon client">
                <i class="fas fa-user-plus"></i>
              </div>
              <div class="activity-info">
                <p class="activity-text">Nuevo cliente registrado</p>
                <span class="activity-time">Ayer</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Performance -->
      <div class="info-card">
        <div class="card-header">
          <h3 class="card-title">
            <i class="fas fa-medal"></i>
            Top Asesores
          </h3>
        </div>
        <div class="card-content">
          <div class="performance-list">
            <div class="performance-item">
              <div class="agent-info">
                <div class="agent-avatar">
                  <i class="fas fa-user-tie"></i>
                </div>
                <div class="agent-details">
                  <p class="agent-name">María García</p>
                  <span class="agent-sales">15 ventas</span>
                </div>
              </div>
              <div class="performance-chart">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 90%"></div>
                </div>
              </div>
            </div>
            <div class="performance-item">
              <div class="agent-info">
                <div class="agent-avatar">
                  <i class="fas fa-user-tie"></i>
                </div>
                <div class="agent-details">
                  <p class="agent-name">Carlos López</p>
                  <span class="agent-sales">12 ventas</span>
                </div>
              </div>
              <div class="performance-chart">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 75%"></div>
                </div>
              </div>
            </div>
            <div class="performance-item">
              <div class="agent-info">
                <div class="agent-avatar">
                  <i class="fas fa-user-tie"></i>
                </div>
                <div class="agent-details">
                  <p class="agent-name">Ana Martínez</p>
                  <span class="agent-sales">10 ventas</span>
                </div>
              </div>
              <div class="performance-chart">
                <div class="progress-bar">
                  <div class="progress-fill" style="width: 60%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--
<div class="button" style="position: absolute; top: 100px; left: 40px; z-index: 10000;">
  <a (click)="onGenerateTable()">Generar PDF</a>
</div>
-->
<!--
<div>
  <button mat-raised-button class="mat-raised-button">Primary Button</button>
</div>
-->

<app-menu-component></app-menu-component>
<app-project-selector-component></app-project-selector-component>
<!--<app-client-search-component></app-client-search-component>-->
<app-loader-component></app-loader-component>